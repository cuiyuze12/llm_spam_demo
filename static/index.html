<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>AIãƒãƒ«ãƒæ©Ÿèƒ½ãƒ‡ãƒ¢</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 40px;
      background-color: #f9f9f9;
    }
    h2 {
      color: #333;
      text-align: center;
    }
    .tab {
      display: inline-block;
      padding: 10px 20px;
      margin-right: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
      background-color: #eee;
    }
    .tab.active {
      background-color: #007BFF;
      color: white;
    }
    .content {
      display: none;
      margin-top: 30px;
      padding: 20px;
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    .content.active {
      display: block;
    }
    input[type="text"] {
      width: 80%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      padding: 10px 20px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #218838;
    }
    .output {
      margin-top: 20px;
      padding: 10px;
      background-color: #f1f1f1;
      border-left: 4px solid #007BFF;
    }
  </style>
</head>
<body>
<h2>AIãƒãƒ«ãƒæ©Ÿèƒ½ãƒ‡ãƒ¢</h2>

<section style="max-width: 900px; margin: 0 auto 30px auto; padding: 10px 20px; background-color: #fff; border-left: 4px solid #007BFF;">
  <p>ã“ã®ãƒ‡ãƒ¢ã‚’ã”è¦§é ‚ãã€èª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p>
  <p>æœ¬ãƒ‡ãƒ¢ã§ã¯ã€è‡ªä½œã®è»½é‡LLMã€RAGã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ãŸå¤šæ©Ÿèƒ½AIã‚¢ãƒ—ãƒªã‚’ä½“é¨“ã§ãã¾ã™ã€‚</p>
</section>

<div id="tabs">
  <div class="tab active" onclick="switchTab('llm')">è‡ªä½œLLM</div>
  <div class="tab" onclick="switchTab('rag')">è‡ªä½œRAG</div>
  <div class="tab" onclick="switchTab('agent')">è‡ªä½œAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</div>
</div>

<div id="llm" class="content active">
  <p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€GPT-2 ãƒ™ãƒ¼ã‚¹ã®è‡ªä½œè»½é‡LLMã‚’æ´»ç”¨ã—ãŸ2ã¤ã®æ©Ÿèƒ½ã‚’ã”ä½“é¨“ã„ãŸã ã‘ã¾ã™ã€‚</p>
  <ul>
    <li><b>è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«åˆ†é¡ï¼š</b>GPT-2 ãƒ¢ãƒ‡ãƒ«ã«å¯¾ã—ã¦ã€Œåˆ†é¡ã‚¿ã‚¹ã‚¯ã€ã®ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’æ–½ã—ã€è‹±èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¹ãƒ‘ãƒ ï¼éã‚¹ãƒ‘ãƒ ã«åˆ†é¡ã—ã¾ã™ã€‚</li>
    <li><b>æŒ‡ç¤ºã«åŸºã¥ãå›ç­”ç”Ÿæˆï¼š</b>åŒã˜ã GPT-2 ãƒ¢ãƒ‡ãƒ«ã«å¯¾ã—ã¦ã€Œå‘½ä»¤æ–‡å¿œç­”ã‚¿ã‚¹ã‚¯ã€ã®ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¡Œã„ã€è‹±èªã§ã®å¯¾è©±æŒ‡ç¤ºã«å¿œã˜ãŸå›ç­”ã‚’ç”Ÿæˆã—ã¾ã™ï¼ˆæ—¥æœ¬èªã¯æœªå¯¾å¿œï¼‰</li>
  </ul>
  <p>ã„ãšã‚Œã®ãƒ¢ãƒ‡ãƒ«ã‚‚ Google Colab ä¸Šã§å­¦ç¿’ã‚’è¡Œã„ã€ç¾åœ¨ã¯ EC2 ä¸Šã® Web ã‚¢ãƒ—ãƒªã‹ã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¨è«–å¯èƒ½ã§ã™ã€‚<br>
    ãªãŠã€æœ¬ãƒ‡ãƒ¢ã§ã¯è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã®åˆ¶ç´„ã‚’è€ƒæ…®ã—ã€è»½é‡ãª GPT-2 ãƒ¢ãƒ‡ãƒ«ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€<strong>å¯¾å¿œè¨€èªã¯è‹±èªã®ã¿ã«é™å®šã—ã¦ã„ã¾ã™</strong>ã€‚
  </p>
  <h3>1. ã‚¹ãƒ‘ãƒ åˆ†é¡ãƒ¢ãƒ‡ãƒ«å­¦ç¿’</h3>
  <p>ã“ã®åˆ†é¡ãƒ¢ãƒ‡ãƒ«ã¯ Google Colab ä¸Šã§äº‹å‰ã«è¨“ç·´ã•ã‚Œã¾ã—ãŸã€‚å­¦ç¿’ã®è©³ç´°ã¯ã“ã¡ã‚‰ï¼š</p>
  <a href="https://colab.research.google.com/drive/1hdvDvt_2Bdi6xo7g8RCQMG2IDc88mCGH?usp=sharing" target="_blank">
    â–¶ Google Colab Notebook ã‚’è¦‹ã‚‹
  </a>
  <h3>2. ã‚¹ãƒ‘ãƒ åˆ†é¡ã‚’è©¦ã—ã¦ã¿ã‚ˆã†</h3>
  <details style="margin-bottom: 15px;">
    <summary>åˆ†é¡ã®ä¾‹ã‚’è¡¨ç¤ºã™ã‚‹</summary>
    <div style="margin-top: 10px;">
      <b>ğŸŸ¢ éã‚¹ãƒ‘ãƒ ä¾‹:</b>
      <ul>
        <li>Letâ€™s meet at 3 PM for the project discussion.</li>
        <li>Your Amazon package has been shipped.</li>
        <li>Can you send me the updated file?</li>
      </ul>
      <b>ğŸ”´ ã‚¹ãƒ‘ãƒ ä¾‹:</b>
      <ul>
        <li>This is a limited time offer! Click now to win a free iPhone!</li>
        <li>You are a winner you have been specially  selected to receive $1000 cash or a $2000 award.</li>
        <li>Call Free 0800 1956669 or text back help</li>
      </ul>
    </div>
  </details>

  <input type="text" id="spam_input" placeholder="ã“ã“ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è‹±èªã§å…¥åŠ›ã—ã¦ãã ã•ã„">
  <br>
  <button onclick="checkSpam()">åˆ†é¡</button>
  <div id="spam_output" class="output"></div>

  <hr/>
  <h3>3. æŒ‡ç¤ºã«åŸºã¥ãå›ç­”ç”Ÿæˆãƒ¢ãƒ‡ãƒ«å­¦ç¿’</h3>
  <p>ã“ã®åˆ†é¡ãƒ¢ãƒ‡ãƒ«ã¯ Google Colab ä¸Šã§äº‹å‰ã«è¨“ç·´ã•ã‚Œã¾ã—ãŸã€‚å­¦ç¿’ã®è©³ç´°ã¯ã“ã¡ã‚‰ï¼š</p>
  <a href="https://colab.research.google.com/drive/1AuHT-n5hmgOjXYdXSzgLO6-3D46lEEu9?usp=sharing" target="_blank">
    â–¶ Google Colab Notebook ã‚’è¦‹ã‚‹
  </a>
  <h3>4. æŒ‡ç¤ºã«åŸºã¥ãå›ç­”ç”Ÿæˆã‚’è©¦ã—ã¦ã¿ã‚ˆã†</h3>
  <details>
    <summary>ğŸ’¡ æŒ‡ç¤ºå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ä¾‹ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
    <p>ä»¥ä¸‹ã®å½¢å¼ã§è‹±èªã®æŒ‡ç¤ºã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š</p>
    <pre style="background-color: #f4f4f4; padding: 10px; border-radius: 5px;">
Below is an instruction that describes a task. Write a response that appropriately completes the request.

### Instruction:
Rewrite the sentence using a simile.

### Input:
The car is very fast.</pre>
    <p>ãã®ä»–ã®ä¾‹ï¼š</p>
    <ul>
      <li><code>### Instruction:</code> What type of cloud is typically associated with thunderstorms? </li>
      <li><code>### Instruction:</code> Rewrite the following sentence using passive voice. <br><code>### Input:</code> The team achieved great results.</li>
    </ul>
  </details>
  <textarea id="generate_input" placeholder="ã“ã“ã«æŒ‡ç¤ºã‚’è‹±èªã§å…¥åŠ›ã—ã¦ãã ã•ã„" rows="8" style="width: 80%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px;"></textarea>
  <br>
  <button onclick="generateResponse()">é€ä¿¡</button>
  <div id="generate_output" class="output"></div>
</div>

<div id="rag" class="content">
  <p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€è‡ªä½œã®RAGï¼ˆRetrieval-Augmented Generationï¼‰æ©Ÿèƒ½ã‚’ã”ä½“é¨“é ‚ã‘ã¾ã™ã€‚</p>
  <ul>
    <li>Amazon Bedrockã®Knowledge Baseã¨çµ±åˆã—ã€ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã«ç™»éŒ²ã•ã‚ŒãŸç¤¾å†…è³‡æ–™ã‚’æ¤œç´¢ã—ã¦å›ç­”ã‚’ç”Ÿæˆã€‚</li>
    <li>é–¢é€£æƒ…å ±ãŒå­˜åœ¨ã—ãªã„å ´åˆã€ã€ŒãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã«è©²å½“æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€ã¨é€šçŸ¥ã—ã¾ã™ã€‚</li>
  </ul>

  <h3>RAG è³ªå•å¿œç­”</h3>
  <input type="text" id="rag_input" placeholder="è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
  <button onclick="sendRAG()">æ¤œç´¢</button>
  <div id="rag_output" class="output"></div>
</div>

<div id="agent" class="content">
  <p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Bedrock Agentã«ã‚ˆã‚‹AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã‚’ã”ä½“é¨“é ‚ã‘ã¾ã™ã€‚</p>
  <ul>
    <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•å†…å®¹ã‚’ä»¥ä¸‹3ã‚«ãƒ†ã‚´ãƒªã«åˆ†é¡ã—ã¦å‡¦ç†ã—ã¾ã™ï¼š</li>
    <ul>
      <li><b>a)</b> AWSã®æœ€æ–°æƒ…å ± â†’ å¤–éƒ¨APIã‹ã‚‰å–å¾—</li>
      <li><b>b)</b> ä¸€èˆ¬çŸ¥è­˜ â†’ Claude 3 ã«ã‚ˆã‚‹å›ç­”</li>
      <li><b>c)</b> ç¤¾å†…ãƒŠãƒ¬ãƒƒã‚¸ â†’ Knowledge Baseã‹ã‚‰å›ç­”</li>
    </ul>
    <li>Bedrock Agentã®function callingæ©Ÿèƒ½ã‚’æ´»ç”¨ã—ãŸæœ¬æ ¼çš„ãªãƒãƒ«ãƒãƒ„ãƒ¼ãƒ«çµ±åˆæ§‹æˆã§ã™ã€‚</li>
  </ul>
  <h3>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ãƒãƒ£ãƒƒãƒˆ</h3>
  <input type="text" id="agent_input" placeholder="æŒ‡ç¤ºã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
  <button onclick="sendAgent()">å®Ÿè¡Œ</button>
  <div id="agent_output" class="output"></div>
</div>

<script>
  function switchTab(tabName) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    document.querySelector(`.tab[onclick*="${tabName}"]`).classList.add('active');
    document.getElementById(tabName).classList.add('active');
  }

  async function checkSpam() {
    const text = document.getElementById('spam_input').value;
    const spamResultArea = document.getElementById('spam_output');
    spamResultArea.textContent = "Checking...";

    try {
      const response = await fetch('/api/predict', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text })
      });

      if (!response.ok) {
        spamResultArea.textContent = "Error: " + response.statusText;
        return;
      }

      const data = await response.json();
      spamResultArea.innerHTML = `<b>åˆ†é¡:</b> ${data.label} <br><b>ä¿¡é ¼åº¦:</b> ${data.confidence.toFixed(4)}`;
    } catch (err) {
      spamResultArea.textContent = "Request failed: " + err.message;
    }
  }

  async function generateResponse() {
    const prompt = document.getElementById('generate_input').value;
    const resultArea = document.getElementById('generate_output');
    resultArea.textContent = "ç”Ÿæˆä¸­...";

    try {
      const response = await fetch('/api/generate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt })
      });

      if (!response.ok) {
        resultArea.textContent = "Error: " + response.statusText;
        return;
      }

      const data = await response.json();
      resultArea.innerHTML = `<b>ç”Ÿæˆçµæœ:</b><br/>${data.response}`;
    } catch (err) {
      resultArea.textContent = "Request failed: " + err.message;
    }
  }

  async function sendRAG() {
    const input = document.getElementById("rag_input").value;
    const res = await fetch("/api/rag_qa", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({query: input})
    });
    const data = await res.json();
    document.getElementById("rag_output").innerText = data.answer || "å¿œç­”ãŒã‚ã‚Šã¾ã›ã‚“";
  }

  async function sendAgent() {
    const input = document.getElementById("agent_input").value;
    const res = await fetch("/api/agent_chat", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({message: input})
    });
    const data = await res.json();
    document.getElementById("agent_output").innerText = data.answer || "å¿œç­”ãŒã‚ã‚Šã¾ã›ã‚“";
  }
</script>
</body>
</html>
